BOOT_OBJ:=  $(patsubst %.c,%.o, $(wildcard boot/*.c)) \
			$(patsubst %.cc,%.o, $(wildcard boot/*.cc)) \
			$(patsubst %.s,%.o, $(wildcard boot/*.s)) \
			$(patsubst %.S,%.o, $(wildcard boot/*.S))
			
			

# ----------------------------------------------------------------------------

.PHONY:= boot
boot : boot/kernel.img
boot/kernel.img : boot/boot.exe
	$(OBJCOPY) boot/boot.exe -O binary boot/kernel.img

boot/boot.exe : $(BOOT_OBJ) boot/linker.ls
	$(LINK) $(BOOT_OBJ) -lgcc -lc -T boot/linker.ls -o boot/boot.exe
	
	
	
# ----------------------------------------------------------------------------

.PHONY : boot/depend
boot/depend : 
	$(DEPEND) $(DFLAGS) -f boot/makefile.in $(wildcard boot/*.c)

# ----------------------------------------------------------------------------

.PHONY : boot/clean
boot/clean :
	rm -f boot/boot.exe
	rm -f boot/kernel.img
	rm -f boot/*.o
	rm -f boot/dump.txt
	rm -f boot/makefile.in.bak

.PHONY : boot/dump
boot/dump :
	$(OBJDUMP) -xshDt boot/boot >boot/dump.txt

.PHONY : boot/strip
boot/strip :
	$(STRIP) -s --remove-section=.comment boot/boot

# ----------------------------------------------------------------------------	
	
# DO NOT DELETE

boot/bootstrap.o: boot/types.h boot/dbg.h boot/arm.h boot/bootinfo.h
boot/bootstrap.o: boot/memory.h boot/globals.h boot/block.h
boot/bootstrap.o: /usr/include/stdint.h /usr/include/features.h
boot/bootstrap.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/bootstrap.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/bootstrap.o: /usr/include/bits/wchar.h boot/elf.h boot/bootstrap.h
boot/debug.o: boot/types.h boot/dbg.h boot/arm.h boot/string.h boot/globals.h
boot/debug.o: boot/block.h /usr/include/stdint.h /usr/include/features.h
boot/debug.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/debug.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/debug.o: /usr/include/bits/wchar.h boot/elf.h boot/memory.h
boot/debug.o: boot/bootinfo.h
boot/doprintf.o: boot/types.h
boot/elf.o: boot/types.h boot/elf.h boot/fat.h boot/lists.h boot/globals.h
boot/elf.o: boot/block.h /usr/include/stdint.h /usr/include/features.h
boot/elf.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/elf.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/elf.o: /usr/include/bits/wchar.h boot/memory.h boot/bootinfo.h
boot/elf.o: boot/dbg.h boot/arm.h
boot/emmc.o: /usr/include/stdint.h /usr/include/features.h
boot/emmc.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/emmc.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/emmc.o: /usr/include/bits/wchar.h /usr/include/stdio.h
boot/emmc.o: /usr/include/bits/types.h /usr/include/bits/typesizes.h
boot/emmc.o: /usr/include/libio.h /usr/include/_G_config.h
boot/emmc.o: /usr/include/wchar.h /usr/include/bits/stdio_lim.h
boot/emmc.o: /usr/include/bits/sys_errlist.h boot/string.h boot/types.h
boot/emmc.o: /usr/include/stdlib.h /usr/include/bits/waitflags.h
boot/emmc.o: /usr/include/bits/waitstatus.h /usr/include/endian.h
boot/emmc.o: /usr/include/bits/endian.h /usr/include/bits/byteswap.h
boot/emmc.o: /usr/include/bits/byteswap-16.h /usr/include/sys/types.h
boot/emmc.o: /usr/include/time.h /usr/include/sys/select.h
boot/emmc.o: /usr/include/bits/select.h /usr/include/bits/sigset.h
boot/emmc.o: /usr/include/bits/time.h /usr/include/sys/sysmacros.h
boot/emmc.o: /usr/include/bits/pthreadtypes.h /usr/include/alloca.h
boot/emmc.o: /usr/include/bits/stdlib-float.h boot/memory.h boot/dbg.h
boot/emmc.o: boot/arm.h boot/mmio.h boot/block.h boot/timer.h boot/util.h
boot/emmc.o: boot/mbox.h
boot/fat.o: boot/fat.h boot/types.h boot/lists.h boot/string.h boot/globals.h
boot/fat.o: boot/block.h /usr/include/stdint.h /usr/include/features.h
boot/fat.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/fat.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/fat.o: /usr/include/bits/wchar.h boot/elf.h boot/memory.h
boot/fat.o: boot/bootinfo.h boot/dbg.h boot/arm.h
boot/globals.o: boot/types.h boot/globals.h boot/block.h
boot/globals.o: /usr/include/stdint.h /usr/include/features.h
boot/globals.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/globals.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/globals.o: /usr/include/bits/wchar.h boot/elf.h boot/memory.h
boot/globals.o: boot/bootinfo.h boot/fat.h boot/lists.h
boot/main.o: boot/types.h boot/block.h /usr/include/stdint.h
boot/main.o: /usr/include/features.h /usr/include/stdc-predef.h
boot/main.o: /usr/include/sys/cdefs.h /usr/include/bits/wordsize.h
boot/main.o: /usr/include/gnu/stubs.h /usr/include/bits/wchar.h boot/fat.h
boot/main.o: boot/lists.h boot/dbg.h boot/arm.h boot/elf.h boot/memory.h
boot/main.o: boot/globals.h boot/bootinfo.h boot/bootstrap.h
boot/mbox.o: /usr/include/stdint.h /usr/include/features.h
boot/mbox.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/mbox.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/mbox.o: /usr/include/bits/wchar.h boot/mbox.h boot/mmio.h
boot/memory.o: boot/types.h boot/memory.h boot/globals.h boot/block.h
boot/memory.o: /usr/include/stdint.h /usr/include/features.h
boot/memory.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/memory.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/memory.o: /usr/include/bits/wchar.h boot/elf.h boot/bootinfo.h
boot/memory.o: boot/arm.h
boot/mmio.o: /usr/include/stdint.h /usr/include/features.h
boot/mmio.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/mmio.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/mmio.o: /usr/include/bits/wchar.h boot/mmio.h
boot/timer.o: boot/timer.h /usr/include/stdlib.h /usr/include/features.h
boot/timer.o: /usr/include/stdc-predef.h /usr/include/sys/cdefs.h
boot/timer.o: /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h
boot/timer.o: /usr/include/bits/waitflags.h /usr/include/bits/waitstatus.h
boot/timer.o: /usr/include/endian.h /usr/include/bits/endian.h
boot/timer.o: /usr/include/bits/byteswap.h /usr/include/bits/types.h
boot/timer.o: /usr/include/bits/typesizes.h /usr/include/bits/byteswap-16.h
boot/timer.o: /usr/include/sys/types.h /usr/include/time.h
boot/timer.o: /usr/include/sys/select.h /usr/include/bits/select.h
boot/timer.o: /usr/include/bits/sigset.h /usr/include/bits/time.h
boot/timer.o: /usr/include/sys/sysmacros.h /usr/include/bits/pthreadtypes.h
boot/timer.o: /usr/include/alloca.h /usr/include/bits/stdlib-float.h
boot/timer.o: /usr/include/stdint.h /usr/include/bits/wchar.h boot/mmio.h
boot/timer.o: /usr/include/errno.h /usr/include/bits/errno.h
boot/timer.o: /usr/include/linux/errno.h /usr/include/asm/errno.h
boot/timer.o: /usr/include/asm-generic/errno.h
boot/timer.o: /usr/include/asm-generic/errno-base.h
